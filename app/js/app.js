!function(e){"use strict";e.App={container:null,Model:{},Lib:{},View:{},currentLanguage:"ru",showNotify:!0,serviceContainer:{template:{},lib:{},model:{}},pagination:{type:"lazyLoad",currentPage:1,perPage:8}}}(window);
!function(){"use strict";var e={eventCollection:[],addListener:function(e,n){this.eventCollection.push({eventType:e,eventHandler:n})},dispatch:function(e,n){this.eventCollection.forEach(function(t){e===t.eventType&&t.eventHandler(n)})}};App.serviceContainer.lib.event=e,App.Lib.Event=e}(App);
!function(){"use strict";var e={ru:{header:{settings:{label:"Выключить оповещение"},languages:{},search:{button:"Поиск"}},userTable:{tHead:{id:"№",name:"Имя",email:"Email",birth:"День рождения",time:"Расчетное время",delete:"Удалить",edit:"Редактировать"},tBody:{delete:"Удалить",edit:"Редактировать"}},modal:{create:{caption:"Добавить нового клиента",avatar:"Загрузить аватар",name:"Введите имя",email:"Введите email",birth:"Укажите день рождения",time:"Укажите расчётное время",save:"Сохранить",cancel:"Отмена"},edit:{caption:"Редактировать клиента",avatar:"Загрузить аватар",name:"Введите новое имя",email:"Введите новый email",birth:"Изменить день рождения",time:"Изменить расчётное время",save:"Сохранить",cancel:"Отмена"},confirm:{message:"Есть изменения. Сохранить?",save:"Сохранить",cancel:"Отмена"}},option:{adduser:"Добавить клиента"},notify:{createUser:"Добавлен пользователь: %name",timePassed:"У пользователя %name (№ %id) вышло время!",deleteUser:"Удалён пользователь: %name (№ %id)"}},en:{header:{settings:{label:"Turn off notifications"},languages:{},search:{button:"Search"}},userTable:{tHead:{id:"ID",name:"Name",email:"Email",birth:"Date of birth",time:"Estimated time",delete:"Delete",edit:"Edit"},tBody:{delete:"Delete",edit:"Edit"}},modal:{create:{caption:"Add new client",avatar:"Upload Avatar",name:"Enter name",email:"Enter email",birth:"Enter birthday",time:"Enter the estimated time",save:"Save",cancel:"Cancel"},edit:{caption:"Edit client",avatar:"Upload Avatar",name:"Enter name",email:"Enter email",birth:"Enter birthday",time:"Enter the estimated time",save:"Save",cancel:"Cancel"},confirm:{message:"There are changes. Save?",save:"save",cancel:"cancel"}},option:{adduser:"Add client"},notify:{createUser:"User added: %name",timePassed:"User Name %name (№ %id) came time!",deleteUser:"Deleted user: %name (№ %id)"}},patterns:{name:/(%name)/g,id:/(%id)/g},event:App.Lib.Event,t:function(e){var a=this[App.currentLanguage],t=function(e,a){return e.length<=1?a[e[0]]:(e.length>1&&(a=a[e.shift()]),t(e,a))};return t(e,a)},getMessage:function(e,a){var t=this.t(a);for(var i in e)t=t.replace(this.patterns[i],e[i]);return t},selectLang:function(e){App.currentLanguage=e,this.event.dispatch("languageChange")}};App.serviceContainer.lib.dictionary=e,App.Lib.Dictionary=e}(App);
!function(){"use strict";function t(t,e){this.element=e,this.startTime=new Date(t.start).getTime(),this.finishTime=new Date(t.end).getTime(),this.className="",this.percent=null,this.timer=new App.Lib.Timer({start:t.start,end:t.end},this.timerCb.bind(this)),this.progressCalc(),this.showProgress()}t.prototype.start=function(){this.timer.start()},t.prototype.stop=function(){this.timer.stop()},t.prototype.timerCb=function(){this.progressCalc(),this.showProgress()},t.prototype.getClassName=function(){return this.className},t.prototype.getPercent=function(){return this.percent},t.prototype.update=function(t){this.startTime=new Date(t.start).getTime(),this.finishTime=new Date(t.end).getTime(),this.progressCalc(),this.showProgress()},t.prototype.showProgress=function(){"positive"==this.getClassName()?this.element.classList.remove("negative"):this.element.classList.remove("positive"),this.element.style.width=this.getPercent()+"%",this.element.classList.add(this.getClassName())},t.prototype.progressCalc=function(){var t=this.finishTime-this.startTime,e=Date.now()-this.startTime;this.percent=100*e/t,this.className=this.percent>=0&&this.percent<=100?"positive":"negative",this.percent=this.percent>=0&&this.percent<=100?this.percent:100},App.Lib.ProgressBarTimer=t}(App);
!function(t){"use strict";function i(t,i){this.startTime=new Date(t.start).getTime(),this.finishTime=new Date(t.end).getTime(),this.intervalId=null,this.active=!1,this.cb=i}i.prototype.update=function(t){this.startTime=new Date(t.start).getTime(),this.finishTime=new Date(t.end).getTime()},i.prototype.start=function(){var t=this;return this.active!==!0&&(this.active=!0,void(this.intervalId=setInterval(function(){t.cb()},1e3)))},i.prototype.stop=function(){this.active=!1,clearInterval(this.intervalId)},t.Lib.Timer=i}(App);
!function(t,e,i){"use strict";function n(){this.el=e.createElement("div"),this.el.className="tooltip",this.tooltipModel=new t.Model.Tooltip,this.intervalId=null,this.types={name:["image","text"],email:["email"]},this.fields={image:function(t){var i=e.createElement("img");return i.setAttribute("src",t.img),i},text:function(t){var i=e.createElement("p");return i.textContent=t.text,i},email:function(t){var i=e.createElement("p"),n=e.createElement("mark");return i.textContent="Количество непрочитанных писем",n.textContent=t.text,i.appendChild(n),i}}}n.prototype.getX=function(t){var n=this.el.clientWidth,o=i.innerWidth<e.body.clientWidth?i.innerWidth:e.body.clientWidth;return t+n>o&&(t=t-n<0?0:t-n),t},n.prototype.getY=function(t){var n=this.el.clientHeight,o=i.innerHeight<e.body.clientHeight?i.innerHeight:e.body.clientHeight;return t+n>o&&(t=t-n<0?0:t-n),t},n.prototype.calcPosition=function(t){var e=this.getX(t.x+15),i=this.getY(t.y+15);return{x:e,y:i}},n.prototype.show=function(t){this.el.style.display="block";var e=this.calcPosition(t);this.el.style.top=e.y+"px",this.el.style.left=e.x+"px"},n.prototype.hide=function(){this.el.style.display="none"},n.prototype.move=function(t){var e=this.calcPosition(t);this.el.style.top=e.y+"px",this.el.style.left=e.x+"px"},n.prototype.create=function(t,e,i){var n=this;return this.intervalId=setTimeout(function(){n.tooltipModel.load({id:e,type:t}).then(function(e){n.render(t,e),n.show(i)})},500),this},n.prototype.remove=function(){var t=Array.prototype.slice.apply(e.body.querySelectorAll(".tooltip"));t.map(function(t){e.body.removeChild(t)}),clearInterval(this.intervalId)},n.prototype.render=function(t,i){var n=e.createElement("div");n.className="tooltip-"+t;for(var o=e.createDocumentFragment(),l=this.types[t],r=0;r<l.length;r++){var p=l[r],s=this.fields[p](i);o.appendChild(s)}return n.appendChild(o),this.el.appendChild(n),e.body.appendChild(this.el),this.el},t.Lib.Tooltip=n}(App,document,window);
!function(e){"use strict";var a={pattern:{name:/^\w+\s*\w*$/i,email:/^[\w\.]+@\w+\.\w+$/i,image:/^image.+$/i},checkImage:function(e){var a=e.dataset.img;if(a)return{valid:!0,className:"success"};var s=e.files;if(!s[0])return{valid:!1,className:"error"};var t=s[0].type;return this.pattern.image.test(t)?{valid:!0,className:"success"}:{valid:!1,className:"error"}},checkName:function(e){return this.pattern.name.test(e)?{valid:!0,className:"success"}:{valid:!1,className:"error"}},checkEmail:function(e){return this.pattern.email.test(e)?{valid:!0,className:"success"}:{valid:!1,className:"error"}},checkStartDate:function(e){var a=e.date||"",s=e.time||"",t=a+" "+s,i=new Date(t).getTime(),r=(new Date).getTime();return i<r?{valid:!0,className:"success"}:{valid:!1,className:"error"}},checkFinishDate:function(e){var a=e.date||"",s=e.time||"",t=a+" "+s,i=new Date(t).getTime(),r=(new Date).getTime();return i>r?{valid:!0,className:"success"}:{valid:!1,className:"error"}}};e.serviceContainer.lib.validator=a,e.Lib.Validator=a}(App);
!function(e,t){"use strict";function a(){this.fileReader=new FileReader,this.callback=null,this.element=null}a.prototype.read=function(t,a){t.dataset.img=null;var i=e.Lib.Validator.checkImage(t);if(t.classList.add(i.className),!i.valid)return!1;this.callback=a,this.element=t;var r=t.files;this.fileReader.readAsDataURL(r[0]),this.fileReader.onload=this.insertImage.bind(this)},a.prototype.insertImage=function(e){var a=e.target.result;a=this.drawImage(a);var i=this.element.parentNode,r=i.querySelector("img"),l=t.createElement("img");l.setAttribute("src",a),this.element.dataset.img=a,r?r.replaceWith(l):i.insertBefore(l,this.element),this.callback(a)},a.prototype.drawImage=function(e){var a=t.createElement("canvas"),i=a.getContext("2d"),r=new Image;r.src=e;var l=195,s=135,n=l/r.width,h=s/r.height,c=Math.min(n,h),d=n<h?1:0,m=d?l:Math.ceil(r.width*c),o=d?Math.ceil(r.height*c):s;return a.setAttribute("width",m+"px"),a.setAttribute("height",o+"px"),i.drawImage(r,0,0,m,o),e=a.toDataURL()},e.Lib.ImageUploader=a}(App,document);
!function(e){"use strict";var t="http://localhost:4000/";e.Request={load:function(t){var n=this.generateFullUrl(t.entity,t.payload),r=new e.Request.XHR({method:"GET",URL:n,options:t});return r.sendRequest()},update:function(t){var n=this.generateFullUrl(t.entity),r=new e.Request.XHR({method:"PUT",URL:n,options:t});return r.sendRequest()},delete:function(t){var n=this.generateFullUrl(t.entity),r=new e.Request.XHR({method:"DELETE",URL:n,options:t});return r.sendRequest()},create:function(t){var n=this.generateFullUrl(t.entity),r=new e.Request.XHR({method:"POST",URL:n,options:t});return r.sendRequest()},generateFullUrl:function(e,n){var r=this.createQueryString(n),u="";switch(e){case"user":u="user";break;case"tooltip":u="tooltip"}return t+u+r},createQueryString:function(e){if(!e)return"";var t="?";for(var n in e)t+=n+"="+e[n]+"&";return t=t.slice(0,-1)}}}(App);
!function(t){"use strict";function e(t){this.xhr=new XMLHttpRequest,this.method=t.method,this.URL=t.URL,this.config=t.options,this.paramsBody="","payload"in this.config&&(this.paramsBody=this.createParamsBody(this.config.payload))}e.prototype.sendRequest=function(){var t=this;return new Promise(function(e,r){t.xhr.open(t.method,t.URL,!0),t.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.xhr.addEventListener("readystatechange",t.readyStateChangeHandler.bind(t,e,r)),t.xhr.send(t.paramsBody)})},e.prototype.createParamsBody=function(t){var e="";for(var r in t)e+=r+"="+encodeURIComponent(t[r]+"")+"&";return e},e.prototype.readyStateChangeHandler=function(t,e){if(4===this.xhr.readyState)if(this.xhr.status>=200&&this.xhr.status<300){var r=JSON.parse(this.xhr.responseText);t(this.config.success(r))}else{var s="error: "+(this.xhr.status?this.xhr.statusText:"problems with request");e(this.config.error(s))}},t.Request.XHR=e}(App);
!function(t){"use strict";function e(){this.entity="",this.records=[]}e.prototype.xhrLoad=function(e){return t.Request.load(e)},e.prototype.xhrUpdate=function(e){return t.Request.update(e)},e.prototype.xhrDelete=function(e){return t.Request.delete(e)},e.prototype.xhrCreate=function(e){return t.Request.create(e)},t.Model=e}(App);
!function(o){"use strict";function t(){this.entity="tooltip",this.container=o.serviceContainer,o.serviceContainer.model.tooltip=this}t.prototype=new o.Model,t.prototype.onLoadTooltipSuccess=function(o){return this.records=o,this.records},t.prototype.onLoadTooltipError=function(o){return console.warn("ERROR",o),o},t.prototype.load=function(o){var t=this;return this.xhrLoad({entity:this.entity,payload:o,success:this.onLoadTooltipSuccess.bind(t),error:this.onLoadTooltipError.bind(t)})},o.Model.Tooltip=t}(App);
!function(r){"use strict";function e(){this.entity="user",this.container=r.serviceContainer,r.serviceContainer.model.user=this}e.prototype=new r.Model,e.prototype.onLoadUserSuccess=function(r){var e=this;return r.length&&r.forEach(function(r){e.records.push(r)}),r},e.prototype.onLoadUserError=function(r){return console.warn("ERROR",r),r},e.prototype.onUpdateUserSuccess=function(r){var e;return this.records.forEach(function(t,o){t.id===r.id&&(e=o)}),this.records.splice(e,1,r),r},e.prototype.onUpdateUserError=function(r){return console.warn("ERROR",r),r},e.prototype.onDeleteUserSuccess=function(r){var e;return this.records.forEach(function(t,o){t.id===r.id&&(e=o)}),this.records.splice(e,1),r},e.prototype.onDeleteUserError=function(r){return console.warn("ERROR",r),r},e.prototype.onCreateUserSuccess=function(r){return this.records.push(r),r},e.prototype.onCreateUserError=function(r){return r},e.prototype.load=function(r){var e=this;return this.xhrLoad({entity:this.entity,payload:r,success:this.onLoadUserSuccess.bind(e),error:this.onLoadUserError.bind(e)})},e.prototype.update=function(r){var e=this;return this.xhrUpdate({entity:this.entity,payload:r,success:this.onUpdateUserSuccess.bind(e),error:this.onUpdateUserError.bind(e)})},e.prototype.delete=function(r){var e=this;return this.xhrDelete({entity:this.entity,payload:{id:r},success:this.onDeleteUserSuccess.bind(e),error:this.onDeleteUserError.bind(e)})},e.prototype.create=function(r){var e=this;return this.xhrCreate({entity:this.entity,payload:r,success:this.onCreateUserSuccess.bind(e),error:this.onCreateUserError.bind(e)})},r.Model.User=e}(App);
!function(e,t){"use strict";function i(i){this.container=e.serviceContainer,this.event=e.Lib.Event,this.dictionary=this.container.lib.dictionary,this.header=new e.View.Header({userCollection:i.users,rootView:this}),this.usersTable=new e.View.UserTable({userCollection:i.users,rootView:this}),this.modalWindow=new e.View.Modal({userCollection:i.users,rootView:this}),this.optionBlock=new e.View.Option({userCollection:i.users,rootView:this}),this.notifyBlock=new e.View.Notify({userCollection:i.users,rootView:this}),t.addEventListener("keydown",this.handlerKeyPress.bind(this,this)),this.event.addListener("languageChange",this.localization.bind(this)),e.serviceContainer.template.rootView=this}i.prototype.handlerKeyPress=function(e,t){return 27==t.which&&void e.modalWindow.el.click()},i.prototype.render=function(){e.container.appendChild(this.header.render()),e.container.appendChild(this.usersTable.render()),e.container.appendChild(this.modalWindow.render()),e.container.appendChild(this.optionBlock.render()),e.container.appendChild(this.notifyBlock.render())},i.prototype.localization=function(){var t=this.createAST(e.container);return this.translate(t,""),!0},i.prototype.translate=function(e,t){var i=this;if(t+=e.key+"|",e.children.length)e.children.forEach(function(e){return i.translate(e,t)});else{var n=t.substring(0,t.length-1).split("|"),r=n.reduce(function(e,t){return""!==t&&e.push(t),e},[]),o=i.dictionary.t(r);"string"==typeof o&&(e.el.textContent=o)}return!0},i.prototype.createAST=function(e){var t=this,i={};i.key="",i.el=null,i.children=[],e.dataset.languageKey&&(i.key=e.dataset.languageKey),i.el=e;var n=[];return e.childNodes&&(n=[].slice.apply(e.childNodes)),n=n.reduce(function(e,t){return 1==t.nodeType&&e.push(t),e},[]),i.children=n.map(function(e){if(e.childNodes)return t.createAST(e)}),i},e.View=i}(App,document);
!function(e,t){"use strict";function i(i){this.el=t.createElement("div"),this.el.className="header",this.el.dataset.languageKey="header",this.container=e.serviceContainer,this.collection={user:i.userCollection},this.search=new e.View.Header.Search({collection:this.collection,headerEl:this}),this.setting=new e.View.Header.Settings({collection:this.collection,headerEl:this}),this.languages=new e.View.Header.Languages({collection:this.collection,headerEl:this}),e.serviceContainer.template.header=this}i.prototype.render=function(){return this.el.appendChild(this.setting.render()),this.el.appendChild(this.languages.render()),this.el.appendChild(this.search.render()),this.el},e.View.Header=i}(App,document);
!function(e,t){"use strict";function a(a){this.el=t.createElement("div"),this.el.className="languages-wrapper",this.container=e.serviceContainer,this.collection=a.collection,this.headerEl=a.headerEl,this.el.addEventListener("click",this.switch.bind(this,this)),e.serviceContainer.template.laguages=this}a.prototype.switch=function(e,t){var a=t.target;return"A"==a.tagName&&(e.container.lib.dictionary.selectLang(a.dataset.language),void e.backlight())},a.prototype.backlight=function(){var t=[].slice.apply(this.el.querySelectorAll("a")),a=e.currentLanguage;t.forEach(function(e){e.classList.remove("active"),e.dataset.language==a&&e.classList.add("active")})},a.prototype.render=function(){var e=t.createElement("a");e.textContent="EN",e.dataset.language="en";var a=t.createElement("a");return a.textContent="RU",a.dataset.language="ru",this.el.appendChild(e),this.el.appendChild(a),this.backlight(),this.el},e.View.Header.Languages=a}(App,document);
!function(e,t){"use strict";function n(n){this.el=t.createElement("div"),this.el.className="search",this.el.dataset.languageKey="search",this.container=e.serviceContainer,this.collection=n.collection,this.headerEl=n.headerEl,this.dictionary=this.container.lib.dictionary,this.nodes={},e.serviceContainer.template.search=this}n.prototype.handlerSearch=function(e,t){var n=e.nodes.input.value;e.container.template.userTableTbody.render({type:"search",find:n})},n.prototype.render=function(){this.nodes.input=t.createElement("input"),this.nodes.input.setAttribute("name","search"),this.nodes.button=t.createElement("button"),this.nodes.button.dataset.languageKey="button",this.nodes.button.textContent=this.dictionary.t(["header","search","button"]),this.nodes.button.addEventListener("click",this.handlerSearch.bind(this,this));for(var e in this.nodes)this.el.appendChild(this.nodes[e]);return this.el},e.View.Header.Search=n}(App,document);
!function(t,e){"use strict";function i(i){this.el=e.createElement("div"),this.el.className="switch-notify",this.el.dataset.languageKey="settings",this.container=t.serviceContainer,this.collection=i.collection,this.headerEl=i.headerEl,this.dictionary=this.container.lib.dictionary,this.nodes={},t.serviceContainer.template.switchNotify=this}i.prototype.switch=function(e){var i=!e.target.checked;t.showNotify=i},i.prototype.render=function(){this.nodes.switchEl=e.createElement("input"),this.nodes.switchEl.setAttribute("type","checkbox"),this.nodes.switchEl.setAttribute("id","switch"),this.nodes.switchEl.checked=!t.showNotify,this.nodes.switchEl.addEventListener("change",this.switch),this.nodes.labelEl=e.createElement("label"),this.nodes.labelEl.setAttribute("for","switch"),this.nodes.labelEl.dataset.languageKey="label",this.nodes.labelEl.textContent=this.dictionary.t(["header","settings","label"]);for(var i in this.nodes)this.el.appendChild(this.nodes[i]);return this.el},t.View.Header.Settings=i}(App,document);
!function(e,i){"use strict";function t(t){this.el=i.createElement("div"),this.el.className="modal",this.el.dataset.languageKey="modal",this.el.style.visibility="hidden",this.container=e.serviceContainer,this.collection={user:t.userCollection},this.modalEdit=new e.View.Modal.EditUser({collection:this.collection,modalEl:this}),this.modalCreate=new e.View.Modal.CreateUser({collection:this.collection,modalEl:this}),this.modalConfirm=new e.View.Modal.Confirm,this.el.addEventListener("click",this.hideAllModal.bind(this,this)),e.serviceContainer.template.modalWindow=this}t.prototype.hideAllModal=function(e,i){var t=i.target;if("DIV"==t.tagName&&"modal"==t.className){var l=this.container.template.modalCreate,o=this.container.template.modalEdit;l.isShow&&l.beforeHide("cancel"),o.isShow&&o.beforeHide("cancel")}},t.prototype.render=function(){return this.el.appendChild(this.modalCreate.render()),this.el.appendChild(this.modalEdit.render()),this.el.appendChild(this.modalConfirm.render()),this.el},e.View.Modal=t}(App,document);
!function(t,e){"use strict";function n(n){this.el=e.createElement("div"),this.el.className="modal-window modal-confirm",this.el.dataset.languageKey="confirm",this.container=t.serviceContainer,this.dictionary=this.container.lib.dictionary,this.nodes={},this.event=t.Lib.Event,this.el.addEventListener("click",this.makeChoice.bind(this,this)),t.serviceContainer.template.modalConfirm=this}n.prototype.makeChoice=function(t,e){var n=e.target;if("BUTTON"!=n.tagName)return!1;var a=null;switch(n.className){case"ok":a=!0;break;case"cancel":a=!1}t.event.dispatch("makeChoice",a),t.hide()},n.prototype.confirm=function(){this.show()},n.prototype.show=function(){this.el.classList.toggle("show",!0)},n.prototype.hide=function(){this.el.classList.toggle("show",!1)},n.prototype.controlsButton=function(){this.nodes.wrapperButtons=e.createElement("div"),this.nodes.wrapperButtons.className="control-group";var t=e.createElement("button");t.dataset.languageKey="save",t.textContent=this.dictionary.t(["modal","confirm","save"]),t.className="ok";var n=e.createElement("Button");return n.dataset.languageKey="cancel",n.textContent=this.dictionary.t(["modal","confirm","cancel"]),n.className="cancel",this.nodes.wrapperButtons.appendChild(t),this.nodes.wrapperButtons.appendChild(n),this.nodes.wrapperButtons},n.prototype.render=function(){var t=this.controlsButton(),n=e.createElement("h3");return n.dataset.languageKey="message",n.textContent=this.dictionary.t(["modal","confirm","message"]),n.className="caption",this.el.appendChild(n),this.el.appendChild(t),this.el},t.View.Modal.Confirm=n}(App,document);
!function(e,t){"use strict";function a(a){var i=this;this.el=t.createElement("div"),this.el.className="modal-window modal-create",this.el.dataset.languageKey="create",this.modalEl=a.modalEl,this.collection=a.collection,this.container=e.serviceContainer,this.modalType="create",this.isShow=!1,this.dictionary=this.container.lib.dictionary,this.nodes={},this.renderOrder=["caption","avatar","name","email","birth","date","control"],this.fields={caption:function(){return i.nodes.caption=t.createElement("h3"),i.nodes.caption.className="caption",i.nodes.caption.dataset.languageKey="caption",i.nodes.caption.textContent=i.dictionary.t(["modal",i.modalType,"caption"]),i.nodes.caption},avatar:function(){i.nodes.avatar=t.createElement("div"),i.nodes.avatar.className="group avatar-group";var e=t.createElement("label");e.dataset.languageKey="avatar",e.textContent=i.dictionary.t(["modal",i.modalType,"avatar"]),e.className="avatar-label";var a=t.createElement("input");return a.setAttribute("type","file"),a.setAttribute("name","avatar"),a.addEventListener("change",i.imageUpload.bind(i,i)),a.className="file-input",i.inputs.avatar=a,i.nodes.avatar.appendChild(e),i.nodes.avatar.appendChild(a),i.nodes.avatar},name:function(){i.nodes.name=t.createElement("div"),i.nodes.name.className="group name-group";var e=t.createElement("label");e.dataset.languageKey="name",e.textContent=i.dictionary.t(["modal",i.modalType,"name"]),e.className="name-label";var a=t.createElement("input");return a.setAttribute("type","text"),a.setAttribute("name","name"),a.className="name-input",i.inputs.name=a,i.nodes.name.appendChild(e),i.nodes.name.appendChild(a),i.nodes.name},email:function(){i.nodes.email=t.createElement("div"),i.nodes.email.className="group email-group";var e=t.createElement("label");e.dataset.languageKey="email",e.textContent=i.dictionary.t(["modal",i.modalType,"email"]),e.className="email-label";var a=t.createElement("input");return a.setAttribute("type","text"),a.setAttribute("name","email"),a.className="email-input",i.inputs.email=a,i.nodes.email.appendChild(e),i.nodes.email.appendChild(a),i.nodes.email},birth:function(){i.nodes.birth=t.createElement("div"),i.nodes.birth.className="group date-group";var e=t.createElement("label");e.dataset.languageKey="birth",e.textContent=i.dictionary.t(["modal",i.modalType,"birth"]),e.className="date-label";var a=t.createElement("input");return a.setAttribute("type","date"),a.setAttribute("name","birth"),a.className="birth-input",i.inputs.birth=a,i.nodes.birth.appendChild(e),i.nodes.birth.appendChild(a),i.nodes.birth},date:function(){i.nodes.time=t.createElement("div"),i.nodes.time.className="group date-group";var e=t.createElement("label");e.dataset.languageKey="time",e.textContent=i.dictionary.t(["modal",i.modalType,"time"]),e.className="date-label";var a=t.createElement("input");a.setAttribute("type","date"),a.setAttribute("name","date"),a.className="date-input",i.inputs.date=a;var n=t.createElement("input");return n.setAttribute("type","time"),n.setAttribute("name","time"),n.className="time-input",i.inputs.time=n,i.nodes.time.appendChild(e),i.nodes.time.appendChild(a),i.nodes.time.appendChild(n),i.nodes.time},control:function(){i.nodes.control=t.createElement("div"),i.nodes.control.className="group control-group";var e=t.createElement("button");e.className="add-btn",e.dataset.languageKey="save",e.textContent=i.dictionary.t(["modal",i.modalType,"save"]);var a=t.createElement("button");return a.className="cancel-btn",a.dataset.languageKey="cancel",a.textContent=i.dictionary.t(["modal",i.modalType,"cancel"]),i.nodes.control.appendChild(e),i.nodes.control.appendChild(a),i.nodes.control}},this.inputs={},this.avatar=null,this.uploader=new e.Lib.ImageUploader,this.el.addEventListener("click",this.handlerControlBtn.bind(this,this)),e.serviceContainer.template.modalCreate=this}a.prototype.handlerControlBtn=function(e,t){var a=t.target;if("BUTTON"!=a.tagName)return!1;switch(a.className){case"cancel-btn":e.beforeHide("cancel");break;case"add-btn":e.chekForm()}},a.prototype.imageUpload=function(e,t){var a=t.target;a.classList.remove("error"),a.classList.remove("success"),this.uploader.read(a,this.onImageUploadSuccess.bind(e))},a.prototype.onImageUploadSuccess=function(e){this.avatar=e},a.prototype.chekForm=function(){var t=e.Lib.Validator,a={},i=!0;for(var n in this.inputs){var s,r=this.inputs[n],o=this.inputs[n].value;switch(r.classList.remove("success"),r.classList.remove("error"),n){case"id":continue;case"avatar":s=t.checkImage(r);break;case"name":s=t.checkName(o);break;case"email":s=t.checkEmail(o);break;case"birth":s=t.checkStartDate({date:o});break;case"date":a.date=o;break;case"time":a.time=o;break;default:console.warn("Unknown type of validator")}if(r.classList.add(s.className),i=s.valid,!i)break}if(i=!!i&&this.chekDate(a),!i)return!1;var l=this.pickData();this.send(l),this.beforeHide("save")},a.prototype.chekDate=function(t){var a=e.Lib.Validator.checkFinishDate(t);return this.inputs.date.classList.add(a.className),this.inputs.time.classList.add(a.className),a.valid},a.prototype.pickData=function(){var e=this.inputs.date.value+" "+this.inputs.time.value,t={id:this.inputs.id?this.inputs.id.value:null,name:this.inputs.name.value,email:this.inputs.email.value,date:new Date(e),birth:new Date(this.inputs.birth.value),avatar:this.avatar,timePassed:!1};return t},a.prototype.send=function(e){var t=this,a=this.container.model.user;a.create(e).then(function(e){t.container.template.userTableTbody.createRow(e)})},a.prototype.beforeHide=function(e){for(var t in this.inputs){var a=this.inputs[t];if(a.classList.remove("error"),a.classList.remove("success"),a.value="","avatar"==t){var i=a.parentNode,n=i.querySelector("img");n&&i.removeChild(n)}}this.hide()},a.prototype.hide=function(){this.modalEl.el.style.visibility="hidden",this.el.classList.toggle("show",!1),this.isShow=!1},a.prototype.show=function(e){e&&this.loadData(e),this.el.classList.toggle("show",!0),this.modalEl.el.style.visibility="visible",this.isShow=!0},a.prototype.render=function(){for(var e=this.renderOrder,a=t.createDocumentFragment(),i=0;i<e.length;i++){var n=e[i];a.appendChild(this.fields[n]())}return this.el.appendChild(a),this.el},e.View.Modal.CreateUser=a}(App,document);
!function(t,e){"use strict";function i(i){var a=this;t.View.Modal.CreateUser.call(this,i),this.el.className="modal-window modal-edit",this.el.dataset.languageKey="edit",this.findItem=[],this.modalType="edit",this.renderOrder.push("id"),this.fields.id=function(){var t=e.createElement("input");return t.setAttribute("type","hidden"),t.setAttribute("name","id"),t.className="id-input",a.inputs.id=t,t},this.event=t.Lib.Event,this.event.addListener("makeChoice",this.makeChoice.bind(this)),t.serviceContainer.template.modalEdit=this}i.prototype=Object.create(t.View.Modal.CreateUser.prototype),i.prototype.loadData=function(t){var i=this.collection.user.filter(function(e){return e.id==t});this.findItem=i[0];var a=this.inputs.avatar.parentNode,s=a.querySelector("img"),n=e.createElement("img");n.setAttribute("src",this.findItem.avatar),s?s.replaceWith(n):a.insertBefore(n,this.inputs.avatar),this.avatar=this.findItem.avatar,this.inputs.avatar.dataset.img=this.findItem.avatar,this.inputs.id.value=this.findItem.id,this.inputs.name.value=this.findItem.name,this.inputs.email.value=this.findItem.email,this.inputs.birth.valueAsNumber=new Date(this.findItem.birth).getTime(),this.inputs.date.valueAsNumber=new Date(this.findItem.date).getTime(),this.inputs.time.valueAsNumber=new Date(this.findItem.date).getTime()+108e5},i.prototype.compareData=function(t){var e=!1;for(var i in t){var a=t[i],s=this.findItem[i];if(a!=s){e=!0;break}}return e},i.prototype.beforeHide=function(t){if("cancel"==t){var e=this.pickData(),i=this.compareData(e);i?(this.el.classList.add("disable"),this.container.template.modalConfirm.confirm()):this.hide()}else this.hide()},i.prototype.makeChoice=function(t){if(this.el.classList.remove("disable"),t){var e=this.pickData();this.send(e)}this.hide()},i.prototype.send=function(t){var e=this.compareData(t);if(!e)return!1;var i=this,a=this.container.model.user;a.update(t).then(function(t){i.container.template.userTableTbody.updateRow(t)})},t.View.Modal.EditUser=i}(App,document);
!function(t,i){"use strict";function e(e){this.el=i.createElement("div"),this.el.className="notify-wrapper",this.items=[],this.container=t.serviceContainer,this.rootView=e.rootView,this.collection={user:e.userCollection},this.el.addEventListener("click",this.hideNotify.bind(this,this)),this.el.addEventListener("transitionend",this.notifyAnimate.bind(this,this)),t.serviceContainer.template.notify=this}e.prototype.create=function(i,e){if(!t.showNotify)return!1;var n=new t.View.Notify.Item({notifyEl:this,params:i,key:e});this.items.push(n),this.el.appendChild(n.show())},e.prototype.hideNotify=function(t,i){var e=i.target;if("notify"!=e.className)return!1;var n=t.items.filter(function(t){return t.id==e.dataset.notifyId});n[0].hide()},e.prototype.notifyAnimate=function(t,i){var e=Date.now();t.items=t.items.reduce(function(t,i){return i.id<e?i.remove():t.push(i),t},[])},e.prototype.render=function(){return this.el},t.View.Notify=e}(App,document);
!function(t,i){"use strict";function e(e){this.el=i.createElement("div"),this.container=t.serviceContainer,this.dictionary=this.container.lib.dictionary,this.notifyEl=e.notifyEl,this.params=e.params,this.keys=["notify"],this.id=Date.now()+15e3,this.timeoutId=null,this.keys.push(e.key),this.create()}e.prototype.create=function(){this.render()},e.prototype.remove=function(){this.notifyEl.el.removeChild(this.el)},e.prototype.show=function(){var t=this;return this.el.style.opacity=1,this.timeoutId=setTimeout(function(){t.hide()},15e3),this.el},e.prototype.hide=function(){clearTimeout(this.timeoutId),this.el.style.opacity=0},e.prototype.render=function(){this.el.className="notify",this.el.dataset.notifyId=this.id;var t=this.dictionary.getMessage(this.params,this.keys);return this.el.textContent=t,this.el},t.View.Notify.Item=e}(App,document);
!function(i,t){"use strict";function e(e){this.el=t.createElement("div"),this.el.className="option",this.el.dataset.languageKey="option",this.container=i.serviceContainer,this.rootView=e.rootView,this.pagination=i.pagination,this.collection={user:e.userCollection},this.addUser=new i.View.Option.AddUser({collection:this.collection,blockEl:this}),this.pagination=new i.View.Option.Pagination({collection:this.collection,blockEl:this}),i.serviceContainer.template.optionBlock=this}e.prototype.render=function(){return this.el.appendChild(this.addUser.render()),this.el.appendChild(this.pagination.render()),this.el},i.View.Option=e}(App,document);
!function(){"use strict";function t(t){this.el=document.createElement("button"),this.el.className="add-user",this.el.dataset.languageKey="adduser",this.container=App.serviceContainer,this.dictionary=this.container.lib.dictionary,this.blockEl=t.blockEl,this.collection=t.userCollection,this.el.textContent=this.dictionary.t(["option","adduser"]),this.el.addEventListener("click",this.showModal.bind(this,this)),App.serviceContainer.template.addUser=this}t.prototype.showModal=function(t,e){t.container.template.modalCreate.show()},t.prototype.render=function(){return this.el},App.View.Option.AddUser=t}();
!function(t,a){"use strict";function e(e){this.el=a.createElement("div"),this.el.className="pagination",this.blockEl=e.blockEl,this.collection=e.collection,this.container=t.serviceContainer,this.pagination=t.pagination,this.behaviourPagination=this.pagination.type,this.event=t.Lib.Event,this.count=0,this.pages=[],"lazyLoad"==this.behaviourPagination?this.lazyInit():this.paginationInit(),t.serviceContainer.template.pagination=this}e.prototype.lazyInit=function(){var t=this,a=this.container.template.userTable,e=this.container.template.userTableTbody;this.container.model.user.load({count:!0}).then(function(i){t.count=i.count,a.el.classList.add("lazyLoad"),e.el.addEventListener("scroll",t.lazyHandlerScroll.bind(t,e,t.count,t.loadData.bind(t)))})},e.prototype.lazyHandlerScroll=function(a,e,i,n){var r=n.target,o=a.el.scrollTop+a.el.clientHeight,s=a.el.scrollHeight;if(o==s){var c=r.childNodes.length,l=c+t.pagination.perPage;c<e&&this.container.model.user.load({start:c,limit:l}).then(i)}},e.prototype.paginationInit=function(){var t=this;this.currentPage=this.pagination.currentPage,this.calculateQuantityPages().then(function(a){t.drawPages(a.quantity),t.backlightPage(),t.el.addEventListener("click",t.changePage.bind(t,t,t.loadData.bind(t)))}),this.event.addListener("deleteRow",this.deleteRow.bind(this)),this.event.addListener("addRow",this.addRow.bind(this))},e.prototype.deleteRow=function(){var t=this;this.calculateQuantityPages().then(function(a){if(a.mod===!1){t.currentPage=1==t.currentPage?1:t.currentPage==a.quantity+1?a.quantity:t.currentPage,t.drawPages(a.quantity),t.backlightPage();var e=t.getStartAndLimitRecords();t.getData(e.start,e.limit,t.loadData.bind(t))}})},e.prototype.addRow=function(){var t=this;this.calculateQuantityPages().then(function(a){t.currentPage=a.quantity,t.drawPages(a.quantity),t.backlightPage();var e=t.getStartAndLimitRecords();t.getData(e.start,e.limit,t.loadData.bind(t))})},e.prototype.calculateQuantityPages=function(){var t=this;return this.container.model.user.load({count:!0}).then(function(a){var e={};return a.count%t.pagination.perPage===0?(e.quantity=a.count/t.pagination.perPage,e.mod=!1):(e.quantity=Math.ceil(a.count/t.pagination.perPage),e.mod=!0),e})},e.prototype.drawPages=function(t){var e=a.createDocumentFragment();if(this.pages.length!=t){this.pages=[],this.el.innerHTML="";for(var i=1;i<=t;i++){var n=a.createElement("div");n.textContent=i,n.dataset.page=i,n.className="page",this.pages.push(n),e.appendChild(n)}this.el.appendChild(e)}},e.prototype.backlightPage=function(){var t=this;this.pages.forEach(function(a){var e=a.dataset.page;a.classList.remove("active"),e==t.currentPage&&a.classList.add("active")})},e.prototype.changePage=function(t,a,e){var i=e.target;if(!i.classList.contains("page"))return!1;var n=i.dataset.page;if(n==this.currentPage)return!1;this.currentPage=n,t.backlightPage();var r=t.getStartAndLimitRecords();t.getData(r.start,r.limit,a)},e.prototype.getStartAndLimitRecords=function(){var t=1==this.currentPage?0:this.currentPage*this.pagination.perPage-this.pagination.perPage,a=t+this.pagination.perPage;return{start:t,limit:a}},e.prototype.getData=function(t,a,e){var i=this;this.container.model.user.load({start:t,limit:a}).then(function(t){e(t),i.container.template.userTableTbody.clearRows(t)})},e.prototype.loadData=function(t){var a=this.container.template.userTableTbody;t.length&&a.newRows(t)},e.prototype.render=function(){return this.el},t.View.Option.Pagination=e}(App,document);
!function(e){"use strict";function t(t){this.el=document.createElement("table"),this.el.className="table",this.el.dataset.languageKey="userTable",this.rootView=t.rootView,this.container=e.serviceContainer,this.tooltip=null,this.collection={user:t.userCollection},this.tHead=new e.View.UserTable.Head({collection:this.collection,tableEl:this}),this.tBody=new e.View.UserTable.Body({collection:this.collection,tableEl:this}),this.el.addEventListener("mousemove",this.handlerTooltip.bind(this,this)),this.el.addEventListener("mouseout",this.handlerTooltip.bind(this,this)),this.el.addEventListener("mouseover",this.handlerTooltip.bind(this,this)),e.serviceContainer.template.userTable=this}t.prototype.handlerTooltip=function(t,i){var o=i.target,l=i.type;if("TD"==o.tagName&&o.dataset.tooltip){t.tooltip||(t.tooltip=new e.Lib.Tooltip);var s=o.dataset.tooltip,a=o.parentNode.querySelector(".id").textContent;switch(l){case"mouseover":t.tooltip.create(s,a,{x:i.pageX,y:i.pageY});break;case"mouseout":t.tooltip.remove(),delete t.tooltip;break;case"mousemove":t.tooltip.move({x:i.pageX,y:i.pageY})}}},t.prototype.render=function(){return this.el.appendChild(this.tHead.render()),this.el.appendChild(this.tBody.render()),this.el},e.View.UserTable=t}(App);
!function(t,e){"use strict";function i(i){var o=this;this.el=e.createElement("tbody"),this.el.className="tBody",this.el.dataset.languageKey="tBody",this.container=t.serviceContainer,this.dictionary=this.container.lib.dictionary,this.collection=i.collection,this.tableEl=i.tableEl,this.tRows=[],this.sortConfig={param:"id",direction:"asc"},this.event=t.Lib.Event,this.collection.user.forEach(function(e){var i=new t.View.UserTable.Body.Row({collection:e,tbodyEl:o});o.tRows.push(i)}),this.el.addEventListener("click",this.handlerCotrolsBtn.bind(this,this)),this.el.addEventListener("transitionend",this.transitionend.bind(this,this)),t.serviceContainer.template.userTableTbody=this}i.prototype.handlerCotrolsBtn=function(t,e){var i=e.target;if("A"!=i.tagName)return!1;var o=i.parentNode.parentNode.querySelector(".id").textContent;switch(i.className){case"edit-btn":t.container.template.modalEdit.show(o);break;case"delete-btn":t.tRows.forEach(function(t){t.id==o&&t.el.classList.add("deleting")})}},i.prototype.transitionend=function(t,e){var i=e.target,o=i.className;switch(o){case"deleting":t.removeRow(i)}},i.prototype.sort=function(t){var e=this.sortConfig,i=t.sort(function(t,i){var o="date"==e.param||"birth"==e.param?new Date(t[e.param]).getTime():t[e.param],n="date"==e.param||"birth"==e.param?new Date(i[e.param]).getTime():i[e.param],r=0;return r="asc"==e.direction?o>n?1:-1:o>n?-1:1});return i},i.prototype.search=function(t){var e=this.tRows.filter(function(e){var i=e.collection.name;return i.indexOf(t.find)!=-1});return e},i.prototype.removeRow=function(t){var e=this,i=this.container.model.user,o=t.querySelector(".id").textContent;e.tRows=e.tRows.reduce(function(t,e){return"deleting"!=e.el.className?t.push(e):e.destroy(),t},[]),i.delete(o).then(function(t){e.event.dispatch("deleteRow"),e.container.template.notify.create(t,"deleteUser")})},i.prototype.updateRow=function(t){this.tRows.forEach(function(e){e.id==t.id&&e.update(t)})},i.prototype.createRow=function(e){this.collection.user.push(e);var i=new t.View.UserTable.Body.Row({collection:e,tbodyEl:this});i.el.classList.add("addition"),this.tRows.push(i),this.el.insertBefore(i.init(),this.el.firstChild),setTimeout(function(){i.el.classList.remove("addition")},100),this.event.dispatch("addRow")},i.prototype.newRows=function(e){var i=this,o={};this.tRows.forEach(function(t){o[t.id]=!0}),e.forEach(function(e){if(!o.hasOwnProperty(e.id)){var n=new t.View.UserTable.Body.Row({collection:e,tbodyEl:i});i.tRows.push(n)}}),this.render()},i.prototype.clearRows=function(t){this.tRows=this.tRows.reduce(function(e,i){var o=t.filter(function(t){return t.id==i.id});return o.length?e.push(i):i.destroy(),e},[])},i.prototype.render=function(t){t&&"sort"==t.type&&(this.sortConfig=t),this.el.innerHTML="";var i=e.createDocumentFragment(),o=this.sort(this.tRows);return t&&"search"==t.type&&(o=this.search(t)),o.forEach(function(t){i.appendChild(t.init())}),this.el.appendChild(i),this.el},t.View.UserTable.Body=i}(App,document);
!function(e,t){"use strict";function n(n){var i=this;this.el=t.createElement("tr"),this.id=n.collection.id,this.container=e.serviceContainer,this.collection=n.collection,this.tbodyEl=n.tbodyEl,this.dictionary=this.container.lib.dictionary,this.nodes={},this.renderOrder=["id","name","email","birth","date","del","edit"],this.fields={id:function(e){return i.nodes.id=t.createElement("td"),i.nodes.id.className="id",i.nodes.id.textContent=e.id,i.nodes.id},name:function(e){return i.nodes.name=t.createElement("td"),i.nodes.name.className="name",i.nodes.name.textContent=e.name,i.nodes.name.dataset.tooltip="name",i.nodes.name},email:function(e){return i.nodes.email=t.createElement("td"),i.nodes.email.className="email",i.nodes.email.textContent=e.email,i.nodes.email.dataset.tooltip="email",i.nodes.email},birth:function(e){var n=new Date(e.birth);return i.nodes.birt=t.createElement("td"),i.nodes.birt.className="birth",i.nodes.birt.textContent=n.getDate()+". "+(n.getMonth()+1)+". "+n.getFullYear(),i.nodes.birt},date:function(n){i.nodes.date=t.createElement("td"),i.nodes.date.className="date";var a=t.createElement("div");a.className="left-time",a.textContent=i.calculateTime(n.date);var r=t.createElement("div");return r.className="overlay",i.progress=new e.Lib.ProgressBarTimer({start:n.birth,end:n.date},r),i.nodes.date.appendChild(a),i.nodes.date.appendChild(r),i.nodes.date},del:function(){i.nodes.del=t.createElement("td"),i.nodes.del.className="del";var e=t.createElement("a");return e.dataset.languageKey="delete",e.textContent=i.dictionary.t(["userTable","tBody","delete"]),e.className="delete-btn",i.nodes.del.appendChild(e),i.nodes.del},edit:function(){i.nodes.edit=t.createElement("td"),i.nodes.edit.className="edit";var e=t.createElement("a");return e.dataset.languageKey="edit",e.textContent=i.dictionary.t(["userTable","tBody","edit"]),e.className="edit-btn",i.nodes.edit.appendChild(e),i.nodes.edit}},this.timer=new e.Lib.Timer({start:i.collection.birth,end:i.collection.date},this.timerCb.bind(this)),this.render()}n.prototype.update=function(e){var t={},n={};for(var i in e)if("timePassed"!=i){var a=e[i];"birth"==i||"date"==i?t[i]=a:"avatar"==i?(n.img=a,n.name=e.name):this.nodes[i].textContent=a}this.progress.update({start:t.birth,end:t.date}),this.timer.update({start:t.birth,end:t.date})},n.prototype.timerCb=function(){var e=this.nodes.date.querySelector(".left-time");e.textContent=this.calculateTime(this.timer.finishTime)},n.prototype.init=function(){return this.timer.start(),this.progress.start(),this.el},n.prototype.destroy=function(){this.stop(),this.tbodyEl.el.removeChild(this.el)},n.prototype.stop=function(){this.timer.stop(),this.progress.stop()},n.prototype.render=function(){for(var e=this.renderOrder,n=t.createDocumentFragment(),i=0;i<e.length;i++){var a=e[i],r=this.fields[a](this.collection);n.appendChild(r)}return this.el.appendChild(n),this.el},n.prototype.calculateTime=function(e){var t=(new Date).getTime();e=new Date(e).getTime();var n=e-t,i=n/1e3,a=Math.floor(i%60);i/=60;var r=Math.floor(i%60);i/=60;var o=Math.floor(i%24);i/=24;var d=Math.floor(i%30);i/=30;var s=Math.floor(i%12),l=Math.floor(i/12),c={years:l,months:s,days:d,hours:o,minutes:r,seconds:a},m="";for(var h in c)m+=h+": "+c[h]+", ";return m},e.View.UserTable.Body.Row=n}(App,document);
!function(e,t){"use strict";function a(a){var d=this;this.el=t.createElement("thead"),this.el.className="tHead",this.el.dataset.languageKey="tHead",this.container=e.serviceContainer,this.collection=a.collection,this.tableEl=a.tableEl,this.dictionary=this.container.lib.dictionary,this.nodes={},this.renderOrder=["id","name","email","birth","date","del","edit"],this.fields={id:function(){return d.nodes.id=t.createElement("th"),d.nodes.id.className="id",d.nodes.id.dataset.sortBy="id",d.nodes.id.dataset.orderBy="asc",d.nodes.id.dataset.languageKey="id",d.nodes.id.textContent=d.dictionary.t(["userTable","tHead","id"]),d.nodes.id},name:function(){return d.nodes.name=t.createElement("th"),d.nodes.name.className="name",d.nodes.name.dataset.sortBy="name",d.nodes.name.dataset.orderBy="asc",d.nodes.name.dataset.languageKey="name",d.nodes.name.textContent=d.dictionary.t(["userTable","tHead","name"]),d.nodes.name},email:function(){return d.nodes.email=t.createElement("th"),d.nodes.email.className="email",d.nodes.email.dataset.sortBy="email",d.nodes.email.dataset.orderBy="asc",d.nodes.email.dataset.languageKey="email",d.nodes.email.textContent=d.dictionary.t(["userTable","tHead","email"]),d.nodes.email},birth:function(){return d.nodes.birth=t.createElement("th"),d.nodes.birth.className="birth",d.nodes.birth.dataset.sortBy="birth",d.nodes.birth.dataset.orderBy="asc",d.nodes.birth.dataset.languageKey="birth",d.nodes.birth.textContent=d.dictionary.t(["userTable","tHead","birth"]),d.nodes.birth},date:function(){return d.nodes.time=t.createElement("th"),d.nodes.time.className="date",d.nodes.time.dataset.sortBy="date",d.nodes.time.dataset.orderBy="asc",d.nodes.time.dataset.languageKey="time",d.nodes.time.textContent=d.dictionary.t(["userTable","tHead","time"]),d.nodes.time},del:function(){return d.nodes.delete=t.createElement("th"),d.nodes.delete.className="delete",d.nodes.delete.dataset.languageKey="delete",d.nodes.delete.textContent=d.dictionary.t(["userTable","tHead","delete"]),d.nodes.delete},edit:function(){return d.nodes.edit=t.createElement("th"),d.nodes.edit.className="edit",d.nodes.edit.dataset.languageKey="edit",d.nodes.edit.textContent=d.dictionary.t(["userTable","tHead","edit"]),d.nodes.edit}},this.el.addEventListener("click",this.handlerSort.bind(this,this)),e.serviceContainer.template.userTableThead=this}a.prototype.handlerSort=function(e,t){var a=t.target;if("delete"===a.className||"edit"===a.className)return!1;var d=a.dataset.orderBy,s=a.dataset.sortBy;e.tdEl.forEach(function(e){var t=e.dataset.sortBy;e.classList.remove("active"),t===s&&(e.classList.add("active"),"asc"==e.dataset.orderBy?(e.classList.remove("asc"),e.classList.add("desc"),e.dataset.orderBy="desc"):(e.classList.remove("desc"),e.classList.add("asc"),e.dataset.orderBy="asc"))}),e.sortCollection(d,s)},a.prototype.sortCollection=function(e,t){var a=this.container.template.userTableTbody;a.render({type:"sort",direction:e,param:t})},a.prototype.render=function(){this.tdEl=[];for(var e=t.createElement("tr"),a=t.createDocumentFragment(),d=this.renderOrder,s=0;s<d.length;s++){var n=d[s],i=this.fields[n]();this.tdEl.push(i),a.appendChild(i)}return e.appendChild(a),this.el.appendChild(e),this.el},e.View.UserTable.Head=a}(App,document);
!function(e,n){"use strict";function t(){var n=new e.Model.User,t={start:e.pagination.currentPage,limit:e.pagination.perPage};n.load(t).then(function(){var t=new e.View({users:n.records});t.render()})}n.addEventListener("DOMContentLoaded",function(){e.container=n.getElementById("app"),t()})}(App,document);