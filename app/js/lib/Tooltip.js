!function(t,e,i){"use strict";function n(){this.el=e.createElement("div"),this.el.className="tooltip",this.tooltipModel=new t.Model.Tooltip,this.intervalId=null,this.types={name:["image","text"],email:["email"]},this.fields={image:function(t){var i=e.createElement("img");return i.setAttribute("src",t.img),i},text:function(t){var i=e.createElement("p");return i.textContent=t.text,i},email:function(t){var i=e.createElement("p"),n=e.createElement("mark");return i.textContent="Количество непрочитанных писем",n.textContent=t.text,i.appendChild(n),i}}}n.prototype.getX=function(t){var n=this.el.clientWidth,o=i.innerWidth<e.body.clientWidth?i.innerWidth:e.body.clientWidth;return t+n>o&&(t=t-n<0?0:t-n),t},n.prototype.getY=function(t){var n=this.el.clientHeight,o=i.innerHeight<e.body.clientHeight?i.innerHeight:e.body.clientHeight;return t+n>o&&(t=t-n<0?0:t-n),t},n.prototype.calcPosition=function(t){var e=this.getX(t.x+15),i=this.getY(t.y+15);return{x:e,y:i}},n.prototype.show=function(t){this.el.style.display="block";var e=this.calcPosition(t);this.el.style.top=e.y+"px",this.el.style.left=e.x+"px"},n.prototype.hide=function(){this.el.style.display="none"},n.prototype.move=function(t){var e=this.calcPosition(t);this.el.style.top=e.y+"px",this.el.style.left=e.x+"px"},n.prototype.create=function(t,e,i){var n=this;return this.intervalId=setTimeout(function(){n.tooltipModel.load({id:e,type:t}).then(function(e){n.render(t,e),n.show(i)})},500),this},n.prototype.remove=function(){var t=Array.prototype.slice.apply(e.body.querySelectorAll(".tooltip"));t.map(function(t){e.body.removeChild(t)}),clearInterval(this.intervalId)},n.prototype.render=function(t,i){var n=e.createElement("div");n.className="tooltip-"+t;for(var o=e.createDocumentFragment(),l=this.types[t],r=0;r<l.length;r++){var p=l[r],s=this.fields[p](i);o.appendChild(s)}return n.appendChild(o),this.el.appendChild(n),e.body.appendChild(this.el),this.el},t.Lib.Tooltip=n}(App,document,window);